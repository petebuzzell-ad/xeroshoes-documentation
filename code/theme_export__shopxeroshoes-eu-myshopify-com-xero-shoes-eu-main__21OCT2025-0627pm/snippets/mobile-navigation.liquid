
<custom-drawer class="custom-drawer mobile-nav-drawer drawer__top-left" id="mobile-nav-drawer" role="dialog" aria-labelledby="mobile-nav-title" aria-modal="true" aria-hidden="true" style="max-width:{{ section.settings.mobile_drawer_width }}px;">
    <div data-section-id="{{ section.id }}" class="d-flex flex-column w-100 h-100" data-role="drawer" tabindex="-1">
        {% liquid 
            assign main_menu = section.settings.menu
            assign secondary_menu = section.settings.menu_mobile_secondary
        %}

        <header class="drawer-header d-flex justify-content-between align-items-center px-4" style="padding-block:16px;">
            <a href="{{ routes.root_url }}" class="navbar-brand nav-item mobile-header--logo drawer-header" tabindex="-1" title="{{ shop.name | escape }}" aria-label="{{ shop.name | escape }}">
                {%- if section.settings.logo_mobile != blank -%}
                    <img srcset="{{ section.settings.logo_mobile | image_url: width: 500 }}"
                        src="{{ section.settings.logo_mobile | image_url: width: 50 }}"
                        loading="lazy"
                        class="img-fluid"
                        width="{{ section.settings.logo_mobile.width }}"
                        height="{{ section.settings.logo_mobile.height }}"
                        alt="{{ section.settings.logo_mobile.alt | default: shop.name | escape }}" 
                        style="max-width: {{ section.settings.logo_width }}px" >
                        <span class="visually-hidden" id="mobile-nav-title">{{ shop.name }}</span>
                {%- else -%}
                    <span class="h5 text-body drawer-header mobile-nav-title" id="mobile-nav-title" tabindex="0">{{ shop.name }}</span>
                {%- endif -%}
            </a>
            <button class="btn-close ml-auto float-right close-mobile--navbar px-0 text-body" tabindex="-1" aria-label="Close mobile nav drawer" data-closedrawer>
                <svg aria-hidden="true" focusable="false"><use href="#icon-close"></use></svg>
            </button>
        </header>
        <div class="drawer-body">
        {% if section.settings.best_sellers != blank %}
            <div class="best-sellers-section best-sellers-section-mobile border-bottom border-gray-100 mb-2 {% unless section.settings.best_sellers_scrollable %}px-4 pb-4{% endunless %}">
                {% if section.settings.best_sellers_heading != blank %}
                    <div class="text-uppercase h6 mb-0 pt-1 {% if section.settings.best_sellers_scrollable %} px-4{% endif %}">{{ section.settings.best_sellers_heading }}</div>
                {% endif %}
                <div class="pt-2 {% if section.settings.best_sellers_scrollable %} px-4 d-flex overflow-auto column-gap-2{% else %} pt-2 row row-gap-2{% endif %}">
                    {% for product in section.settings.best_sellers %}
                        <div class="{% if section.settings.best_sellers_scrollable %}col-12{% else %}col-4 px-2{% endif %}">
                            <div class="product-card-megamenu">
                                <a href="{{ product.url }}" class="d-block text-decoration-none" tabindex="-1">
                                    <div class="megamenu-product-image">
                                        {% assign mega_menu_image = product.metafields.product.mega_menu_image %}
                                        {% if mega_menu_image != blank %}
                                            <img 
                                                data-src="{{ mega_menu_image | image_url: width: 300 }}"
                                                alt="{{ product.title | escape }}"
                                                class="img-fluid w-100 object-fit-cover"
                                                loading="lazy"
                                                width="200"
                                                height="155"
                                            >
                                        {% elsif product.featured_image %}
                                             {% assign prodimage = product.featured_image %}
                                            {% if product.selected_or_first_available_variant.featured_image != blank %}
                                                {% assign prodimage = product.selected_or_first_available_variant.featured_image %}
                                            {% endif %}
                                            {%- render 'image', 
                                                image: prodimage,
                                                sizes: '(min-width: 992px) 300px, 100px',
                                                loading: 'lazy',
                                                alt: product.title,
                                                class: 'img-fluid w-100 object-fit-cover'
                                            -%}
                                        {% else %}
                                            <div class="placeholder-image bg-light d-flex align-items-center justify-content-center" style="height: 100px;">
                                                <span class="text-muted">No image</span>
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="product-info-megamenu d-flex justify-content-center text-center">
                                        <div class="btn btn-link btn-link-dark mb-1 product-title text-dark">{{ product.title }}</div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
        {% if main_menu %}
            <nav class="navbar-mobile navbar-mobile-slide" aria-label="main-menu-list">
                <ul class="navbar-nav" id="main-menu-list">
                   
                    {% for link in linklists[main_menu].links %}
                        {%- liquid 
                            assign menu_block = blank
                            for block in section.blocks
                                assign block_title = block.settings.title
                                if block_title == link.title 
                                    assign menu_block = block
                                    break;
                                endif
                            endfor
                        -%}
                        {% if link.links != blank %}
                            <li class="nav-item dropdown {% if link.active %}active{% endif %} second-level" is="drop-down" >
                                <a tabindex="-1" class="nav-link dropdown-toggle d-flex align-items-center justify-content-between {{ link.handle }}" role="button" tabindex="0" href="{{ link.url }}" data-toggle="open" aria-expanded="false" id="submenu-{{ forloop.index }}" title="{{ link.title }}" aria-label="{{ link.title }}">
                                    <span class="nav-link-title">{{ link.title }}</span>
                                    <svg class="text-body" aria-hidden="true" focusable="false" style="width:10px;height:10px;" class="ms-1"><use href="#icon-arrow-right"></use></svg>
                                </a>
                                <div class="submenu dropdown-menu toggle-content" id="submenu-{{ forloop.index }}" data-type="content">
                                    
                                    <div class="d-flex justify-content-between align-items-center flex-row border-bottom border-gray-100 inner-menu-header">
                                        <a tabindex="-1" role="button" style="top: 2px;width: 50%;" class="justify-content-start nav-link slideout-submenu position-relative d-flex align-items-center mb-0 text-body {{ link.handle }}" tabindex="0" title="{{ link.title }}" aria-label="{{ link.title }}">
                                            <svg aria-hidden="true" focusable="false" ><use href="#icon-arrow-left"></use></svg> <span class="h4 mb-0" style="padding-left: 18px;">{{ link.title }}</span> 
                                        </a>
                                        {% if menu_block.settings.shop_all_text_mobile != blank %}
                                            <a tabindex="-1" class="btn-link btn" role="button" tabindex="0" href="{{ link.url }}" title="{{ link.title }}" style="max-width: 50%;font-size: 14px;font-weight: 400;line-height: 1.1;letter-spacing: 0.01em;">
                                                {{ menu_block.settings.shop_all_text_mobile }}
                                            </a>
                                        {% endif %} 
                                    </div>

                                    {% for childlink in link.links %}
                                        {% if childlink.links != blank %}
                                            {% if forloop.index == 2 and menu_block.settings.best_sellers != blank %}
                                                {%- if menu_block.type == 'megamenu' -%}
                                                    <div class="nav-item dropdown open" is="drop-down">
                                                        <a tabindex="-1" class="nav-link dropdown-toggle h6 mb-0 submenu-dropdown-style-toggle d-flex align-items-center justify-content-between" tabindex="0" data-href="{{ link.url }}" role="button" data-toggle="open" aria-expanded="true" title="{{ menu_block.settings.best_sellers_heading }}" aria-label="{{ menu_block.settings.best_sellers_heading }}">
                                                            <span class="nav-link-title">{{ menu_block.settings.best_sellers_heading }}</span> 
                                                            <span class="position-relative d-inline-flex align-items-center justify-content-center" style="width:11px;height:11px;">
                                                                <svg aria-hidden="true" focusable="false"  class="icon-minus"  style="width:11px;height:11px;"><use href="#icon-minus"></use></svg>
                                                                <svg aria-hidden="true" focusable="false"  class="position-absolute icon-plus"  style="width:11px;height:11px;"><use href="#icon-plus"></use></svg>
                                                            </span>
                                                        </a>
                                                        <div class="submenu submenu-dropdown-style dropdown-menu toggle-content" id="submenu-{{ menu_block.settings.best_sellers_heading | handleize }}" data-type="content">
                                                            <div class="overflow-hidden">
                                                                <div class="best-sellers-section best-sellers-section-mobile">
                                                                    <div class="row pt-3 row-gap-2">
                                                                        {% for product in menu_block.settings.best_sellers %}
                                                                            <div class="col-12">
                                                                                <div class="product-card-megamenu">
                                                                                    <a tabindex="-1" href="{{ product.url }}" class="d-flex align-items-center text-decoration-none">
                                                                                        <div class="megamenu-product-image" style="width: 34%;">
                                                                                            {% assign mega_menu_image = product.metafields.product.mega_menu_image %}
                                                                                            {% if mega_menu_image != blank %}
                                                                                                <img 
                                                                                                    data-src="{{ mega_menu_image | image_url: width: 300 }}"
                                                                                                    alt="{{ product.title | escape }}"
                                                                                                    class="img-fluid w-100 object-fit-cover"
                                                                                                    loading="lazy"
                                                                                                    width="200"
                                                                                                    height="155"
                                                                                                >
                                                                                            {% elsif product.featured_image %}
                                                                                                {% assign prodimage = product.featured_image %}
                                                                                                {% if product.selected_or_first_available_variant.featured_image != blank %}
                                                                                                    {% assign prodimage = product.selected_or_first_available_variant.featured_image %}
                                                                                                {% endif %}
                                                                                                {%- render 'image', 
                                                                                                    image: prodimage,
                                                                                                    sizes: '(min-width: 992px) 300px, 100px',
                                                                                                    loading: 'lazy',
                                                                                                    alt: product.title,
                                                                                                    class: 'img-fluid w-100 object-fit-cover'
                                                                                                -%}
                                                                                            {% else %}
                                                                                                <div class="placeholder-image bg-light d-flex align-items-center justify-content-center" style="height: 100px;">
                                                                                                    <span class="text-muted">No image</span>
                                                                                                </div>
                                                                                            {% endif %}
                                                                                        </div>
                                                                                        <div class="product-info-megamenu d-flex ps-3" style="width: 66%;">
                                                                                            <div class="font-family-heading fs-lg fw-normal mb-0 product-title text-body ls-2">{{ product.title }}</div>
                                                                                        </div>
                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        {% endfor %}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endif %}
                                            {% endif %}
                                            <div class="nav-item dropdown {% if forloop.first %}open{% endif %}" is="drop-down">
                                                <a tabindex="-1" class="nav-link dropdown-toggle h6 mb-0 submenu-dropdown-style-toggle d-flex align-items-center justify-content-between {{ link.handle }}" tabindex="0" data-href="{{ link.url }}" role="button" data-toggle="open" aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}" title="{{ link.title }}" aria-label="{{ link.title }}">
                                                    <span class="nav-link-title">{{ childlink.title }}</span> 
                                                    <span class="position-relative d-inline-flex align-items-center justify-content-center" style="width:11px;height:11px;">
                                                        <svg aria-hidden="true" focusable="false"  class="icon-minus"  style="width:11px;height:11px;"><use href="#icon-minus"></use></svg>
                                                        <svg aria-hidden="true" focusable="false"  class="position-absolute icon-plus"  style="width:11px;height:11px;"><use href="#icon-plus"></use></svg>
                                                    </span>
                                                </a>
                                                <div class="submenu submenu-dropdown-style dropdown-menu toggle-content" id="submenu-{{ childlink.title | handleize }}" data-type="content">
                                                    <div class="overflow-hidden">
                                                        {% for subchildlink in childlink.links %}
                                                            <div class="nav-item mx-0 px-0">
                                                                <a tabindex="-1" class="nav-link d-flex align-items-center text-body {% if subchildlink.active %} active{% endif %} {{ subchildlink.handle }}" href="{{ subchildlink.url }}" tabindex="0" title="{{ subchildlink.title }}" aria-label="{{ subchildlink.title }}">
                                                                    {{ subchildlink.title }}
                                                                </a>
                                                            </div>
                                                        {% endfor %}
                                                        <div class="position-absolute" style="visibility: hidden;pointer-events: none;">
                                                            <a tabindex="-1" role="button" class="nav-link slideout-submenu position-relative d-flex align-items-center bags mb-0 {% if childlink.active %} active{% endif %} {{ childlink.handle }}" title="{{ childlink.title }}" aria-label="{{ childlink.title }}">
                                                                <svg aria-hidden="true" focusable="false" ><use href="#icon-arrow-left"></use></svg>
                                                            </a>
                                                            <span class="menu-title w-100 text-center fw-bold text-uppercase">{{ childlink.title }}</span> 
                                                            <button class="btn-close ml-auto float-right close-mobile--navbar px-0 text-white" aria-label="Close mobile nav drawer" data-closedrawer>
                                                                <svg aria-hidden="true" focusable="false"><use href="#icon-close"></use></svg>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% else %}
                                            <div class="nav-item only-sub-link">
                                                <a tabindex="-1" class="nav-link d-flex align-items-center text-body {% if childlink.active %} active{% endif %} {{ childlink.handle }}" href="{{ childlink.url }}" tabindex="0" name="{{ childlink.title }}" title="{{ childlink.title }}" aria-label="{{ childlink.title }}">
                                                    {{ childlink.title }}
                                                </a>
                                            </div>
                                        {% endif %}
                                    {% endfor %}

                                    {%- if menu_block.type == 'megamenu'  -%}
                                        <div class="px-4 my-4">
                                            <div class="megamenu_img--wrapper links-wrapper-hover position-relative overflow-hidden" style="color: {{ menu_block.settings.text_color }};">
                                                <div class="flex-column position-absolute py-4 px-4 w-100 h-100 d-flex align-items-start justify-content-end z-2">
                                                    {% if menu_block.settings.mega_heading != blank %}
                                                        <div class="h3 mb-1">{{ menu_block.settings.mega_heading }}</div>
                                                    {% endif %}
                                                    {% if menu_block.settings.mega_content != blank %}
                                                        <div class="mb-4 fs-sm">{{ menu_block.settings.mega_content }}</div>
                                                    {% endif %}
                                                    {% if menu_block.settings.link_text != blank or menu_block.settings.link_text_2 != blank %}
                                                        <div class="d-flex gap-3 links-wrapper">
                                                            {% if menu_block.settings.link_text != blank %}
                                                                <a tabindex="-1" href="{{ menu_block.settings.link_url }}" class="btn btn-link btn-link-light z-1">
                                                                    <span class="btn-label">{{ menu_block.settings.link_text }}</span>
                                                                </a>
                                                                <a href="{{ menu_block.settings.link_url }}" aria-label="{{ menu_block.settings.link_text }}" class="position-absolute-link h-100 left-0 position-absolute position-absolute-link top-0 w-100">{{ menu_block.settings.link_text }}</a>
                                                            {% endif %}
                                                        </div>
                                                    {% endif %}
                                                </div>
                                                {% if menu_block.settings.image %}
                                                    {% capture img_alt %}
                                                        Megamenu for {{ link.title }}
                                                    {% endcapture %}
                                                    <div class="megamenu-img">
                                                            {%- render 'image', 
                                                                image: menu_block.settings.image,
                                                                sizes: '(min-width: 992px) 400px, 50px'
                                                                loading: 'lazy',
                                                                alt: img_alt,
                                                                class: 'img-fluid w-100 object-fit-cover'
                                                            -%}
                                                            <div class="overlay" style="background-color: {{ menu_block.settings.bg_color }};"></div></div>
                                                            {% if menu_block.settings.badge_text != blank %}
                                                                <div class="badge position-absolute top-0 start-0 z-2 m-3" style="background-color: {{ menu_block.settings.badge_color }}; color: {{ menu_block.settings.badge_text_color }};">
                                                                    {{ menu_block.settings.badge_text }}
                                                                </div>
                                                            {% endif %}
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            </li>
                        {% else %}
                            <li class="nav-item {% if link.active %} active{% endif %}">
                                <a tabindex="-1" class="nav-link d-flex align-items-center" href="{{ link.url }}" tabindex="0" title="{{ link.title }}" aria-label="{{ link.title }}">
                                    <span class="{{ link.handle }}"><span>{{ link.title }}</span></span>
                                </a>
                            </li>
                        {% endif %}

                    {% endfor %}
                    
                </ul>
            </nav>
        {% endif %}
        {% if secondary_menu != blank %}
            <nav class="navbar-mobile navbar-mobile-secondary border-top border-gray-100 py-3" aria-label="secondary-menu-list">
                <ul class="navbar-nav" id="secondary-menu-list">
                    {% for link in linklists[secondary_menu].links %}
                        <li class="nav-item {% if link.active %} active{% endif %}">
                            <a tabindex="-1" class="nav-link d-flex align-items-center btn-link btn text-start justify-content-start" href="{{ link.url }}" title="{{ link.title }}" aria-label="{{ link.title }}">
                                {{ link.title }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </nav>
        {% endif %}
        </div>
    </div>
</custom-drawer>