
{% capture spacing_class_list %}
    {{ section.settings.section_top_spacing }} {{ section.settings.section_top_spacing_ipad }} {{ section.settings.section_top_spacing_mobile }} {{ section.settings.section_bottom_spacing }} {{ section.settings.section_bottom_spacing_ipad }} {{ section.settings.section_bottom_spacing_mobile }}
{% endcapture %}

{%- liquid
    assign paginate_value = section.settings.blog_posts_per_page | default: 6
-%}
{{ 'template-blog.css' | asset_url | stylesheet_tag }}

{% style %}
    .blog-listing .article-card .card-img{
        aspect-ratio: 1.1436170213;
        position: relative;
    }
    .blog-listing .article-card .card-img img,
    .blog-listing .article-card .card-img .placeholder-svg{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    [data-id="{{ section.settings.id_section_header }}"]{
        scroll-margin-top: 60px;
    }
{% endstyle %}


<section data-id="{{ section.settings.id_section_header }}"  data-section-id="{{ section.id }}" class="{{ spacing_class_list }} {% if section.settings.right_side_fullwidth %}overflow-hidden{% endif %}" style="background: {{ section.settings.section_bg_color }};" id="blog-listing-container" data-section="{{ section.id }}">
    <div class="{% if section.settings.fluid_layout %}container-fluid{% else %}container{% endif %}">     
        <div class="row {{ section.settings.align_items }} {{ section.settings.justify_content }}">
            {%- content_for 'block', type: '_section-header', id: 'static-section-header' -%}
        </div>      
    </div> 
    <div class="{% if section.settings.fluid_layout %}container-fluid{% else %}container{% endif %}">
        {%- paginate blogs[section.settings.blog.handle].articles by paginate_value  -%}
            <div class="row {{ section.settings.align_items }} {{ section.settings.justify_content }} blog-list" data-blog-listing-grid>
                {%- for article in blogs[section.settings.blog.handle].articles -%}
              
                    <div class="col-12 col-sm-6 col-lg-4 mb-6 py-md-3 mb-md-6 d-flex align-items-stretch article-card-wrapper">
                        <div class="card bg-white article-card border-0">
                            {%- if article.image != blank -%}
                            <a href="{{ article.url }}" class="card-img d-block">
                                {%- capture sizes -%}
                                (min-width: {{ settings.container_width }}px) {{ settings.container_width | divided_by: 3 }}px, (min-width:
                                992px) calc(100vw / 3), (min-width: 768px) calc(100vw - 130px), calc(100vw + 100px)
                                {%- endcapture -%}
                                {%- render 'image',
                                image: article.image.src,
                                sizes: sizes,
                                class: 'w-100'
                                -%}
                            </a>
                            {%- else -%}
                            <a href="{{ article.url }}" class="card-img d-block">
                                {% render 'placeholder-image' %}
                            </a>
                            {%- endif -%}
                        
                            <div class="card-body px-0 pt-4 pb-2 text-start">
                                <span class="article-date font-family-heading fs-md lh-11 ls-xxl text-gray-700 text-uppercase mb-2 d-block">{{ article.published_at | date: "%B %d, %Y" }}</span>
                                <h3 class="mb-0 h4">
                                    <a href="{{ article.url }}" class="text-secondary text-transform-none">{{ article.title }}</a>
                                </h3>
                            </div>
                            <div class="card-footer p-0">
                                <a href="{{ article.url }}" class="link-block btn-link btn-link-dark ">{{ 'general.labels.read_more' | t }} <span class="visually-hidden-skip">{{ article.title | escape }}</span></a>
                            </div>
                        </div>
                    </div>
                {%- endfor -%}
            </div>
            {%- if paginate.pages > 1 -%}
                <div class="row pagination-parent" data-pagination-parent data-type="loadmore">
                    <div class="col-12 text-center">
                        {%- if paginate.next -%}
                        <a href="{{ paginate.next.url }}" rel="nofollow" class="btn btn-dark" data-loadmore>
                           Load More
                        </a>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
        {%- endpaginate -%}
    </div>
</section>
<script data-src="{{ 'blog-listing.js' | asset_url }}" defer></script>

{% schema %}
  {
        "name": "Blog Listing",
        "class": "blog-listing",
        "blocks": [{ "type": "@theme" }, { "type": "@app" }],
        "disabled_on": {
            "groups": [
                "footer",
                "header"
            ]
        },
        "settings": [
            {
                "type": "header",
                "content": "Layout"
            },
            {
                "type": "checkbox",
                "id": "fluid_layout",
                "label": "Full Width Layout",
                "default": false
            },
            {
                "type": "header",
                "content": "t:spacing.section_spacing"
            },
            {
                "type": "select",
                "id": "section_top_spacing",
                "label": "t:spacing.desktop_top_spacing",
                "options": [
                    {
                        "value": "",
                        "label": "None"
                    },
                    {
                        "value": "spacing-top-xs",
                        "label": "t:spacing.tight"
                    },
                    {
                        "value": "spacing-top-sm",
                        "label": "t:spacing.standard"
                    },
                    {
                        "value": "spacing-top-md",
                        "label": "t:spacing.spacious"
                    },
                    {
                        "value": "spacing-top-lg",
                        "label": "t:spacing.extra_spacious"
                    }
                ],
                "default": "spacing-top-md"
            },
            {
                "type": "select",
                "id": "section_top_spacing_ipad",
                "label": "t:spacing.ipad_top_spacing",
                "options": [
                    {
                        "value": "",
                        "label": "None"
                    },
                    {
                        "value": "spacing-top-ipad-xs",
                        "label": "t:spacing.tight"
                    },
                    {
                        "value": "spacing-top-ipad-sm",
                        "label": "t:spacing.standard"
                    },
                    {
                        "value": "spacing-top-ipad-md",
                        "label": "t:spacing.spacious"
                    },
                    {
                        "value": "spacing-top-ipad-lg",
                        "label": "t:spacing.extra_spacious"
                    }
                ],
                "default": "spacing-top-ipad-md"
            },
            {
                "type": "select",
                "id": "section_top_spacing_mobile",
                "label": "t:spacing.mobile_top_spacing",
                "options": [
                    {
                        "value": "",
                        "label": "None"
                    },
                    {
                        "value": "spacing-top-mobile-xs",
                        "label": "t:spacing.tight"
                    },
                    {
                        "value": "spacing-top-mobile-sm",
                        "label": "t:spacing.standard"
                    },
                    {
                        "value": "spacing-top-mobile-md",
                        "label": "t:spacing.spacious"
                    },
                    {
                        "value": "spacing-top-mobile-lg",
                        "label": "t:spacing.extra_spacious"
                    }
                ],
                "default": "spacing-top-mobile-md"
            },
            {
                "type": "select",
                "id": "section_bottom_spacing",
                "label": "t:spacing.desktop_bottom_spacing",
                "options": [
                    {
                        "value": "",
                        "label": "None"
                    },
                    {
                        "value": "spacing-bottom-xs",
                        "label": "t:spacing.tight"
                    },
                    {
                        "value": "spacing-bottom-sm",
                        "label": "t:spacing.standard"
                    },
                    {
                        "value": "spacing-bottom-md",
                        "label": "t:spacing.spacious"
                    },
                    {
                        "value": "spacing-bottom-lg",
                        "label": "t:spacing.extra_spacious"
                    }
                ],
                "default": "spacing-bottom-md"
            },
            {
                "type": "select",
                "id": "section_bottom_spacing_ipad",
                "label": "t:spacing.ipad_bottom_spacing",
                "options": [
                    {
                        "value": "",
                        "label": "None"
                    },
                    {
                        "value": "spacing-bottom-ipad-xs",
                        "label": "t:spacing.tight"
                    },
                    {
                        "value": "spacing-bottom-ipad-sm",
                        "label": "t:spacing.standard"
                    },
                    {
                        "value": "spacing-bottom-ipad-md",
                        "label": "t:spacing.spacious"
                    },
                    {
                        "value": "spacing-bottom-ipad-lg",
                        "label": "t:spacing.extra_spacious"
                    }
                ],
                "default": "spacing-bottom-ipad-md"
            },
            {
                "type": "select",
                "id": "section_bottom_spacing_mobile",
                "label": "t:spacing.mobile_bottom_spacing",
                "options": [
                    {
                        "value": "",
                        "label": "None"
                    },
                    {
                        "value": "spacing-bottom-mobile-xs",
                        "label": "t:spacing.tight"
                    },
                    {
                        "value": "spacing-bottom-mobile-sm",
                        "label": "t:spacing.standard"
                    },
                    {
                        "value": "spacing-bottom-mobile-md",
                        "label": "t:spacing.spacious"
                    },
                    {
                        "value": "spacing-bottom-mobile-lg",
                        "label": "t:spacing.extra_spacious"
                    }
                ],
                "default": "spacing-bottom-mobile-sm"
            }, 
            {
                "type": "header",
                "content": "Source Blogs"
            },
            {
                "type": "blog",
                "id": "blog",
                "label": "Select Blog"
            },
            {
                "type": "header",
                "content": "Pagination"
            },
            {
                "type": "range",
                "id": "blog_posts_per_page",
                "min": 3,
                "max": 32,
                "step": 1,
                "default": 16,
                "label": "Blog Posts per page"
            },
            {
                "type": "header",
                "content": "Styling"
            },
            {
                "type": "color_background",
                "id": "section_bg_color",
                "label": "t:settings.background_color",
                "default": "#ffffff"
            },
            {
                "type": "text",
                "id": "id_section_header",
                "label": "Custom ID Added here",
                "info": "If you want to add a custom ID to the section, add it here. This will be added to the section header as a data attribute."
            }
        ],
        "presets": [
            {
                "name": "Blog Listing",
                "category": "Blog Articles",
                "settings": {
                    "section_top_spacing": "spacing-top-md",
                    "section_top_spacing_ipad": "spacing-top-ipad-md",
                    "section_top_spacing_mobile": "spacing-top-mobile-md",
                    "section_bottom_spacing": "spacing-bottom-md",
                    "section_bottom_spacing_ipad": "spacing-bottom-ipad-md",
                    "section_bottom_spacing_mobile": "spacing-bottom-mobile-md"
                }
            }
        ]
    }
{% endschema %}
    