<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
    <title>XeroShoes eCommerce Platform Documentation</title>
    <link rel="stylesheet" href="arcadia-style.css">
    <link rel="icon" type="image/png" href="assets/favicon.png">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <!-- Include Header -->
    <div id="header-placeholder"></div>
    
    <div class="container">
        <h1>XeroShoes eCommerce Platform Documentation</h1>
        
        <div class="two-column-layout">
            <!-- Table of Contents -->
            <nav class="toc-sidebar">
                <h3>Table of Contents</h3>
                <ul>
                    <li><a href="#executive-summary">Executive Summary</a>
                        <ul>
                            <li><a href="#platform-overview">Platform Overview</a></li>
                            <li><a href="#key-technical-components">Key Technical Components</a></li>
                        </ul>
                    </li>
                    <li><a href="#platform-architecture">Platform Architecture</a>
                        <ul>
                            <li><a href="#dual-instance-structure">Dual-Instance Structure</a></li>
                            <li><a href="#theme-architecture">Theme Architecture</a></li>
                            <li><a href="#technology-stack">Technology Stack</a></li>
                        </ul>
                    </li>
                    <li><a href="#content-management">Content Management</a>
                        <ul>
                            <li><a href="#page-templates">Page Templates & Structure</a></li>
                            <li><a href="#content-sections">Content Sections Inventory</a></li>
                            <li><a href="#metafield-integration">Metafield Integration</a></li>
                            <li><a href="#content-workflows">Content Management Workflows</a></li>
                        </ul>
                    </li>
                    <li><a href="#product-management">Product Management</a>
                        <ul>
                            <li><a href="#product-inventory">Product Inventory</a></li>
                            <li><a href="#product-data-standards">Product Data Standards</a></li>
                            <li><a href="#metafields">Metafields & Custom Data</a></li>
                            <li><a href="#product-workflows">Product Management Workflows</a></li>
                        </ul>
                    </li>
                    <li><a href="#integrations">Integrations & Apps</a>
                        <ul>
                            <li><a href="#payment-processing">Payment Processing</a></li>
                            <li><a href="#shipping-logistics">Shipping & Logistics</a></li>
                            <li><a href="#marketing-email">Marketing & Email</a></li>
                            <li><a href="#analytics-tracking">Analytics & Tracking</a></li>
                        </ul>
                    </li>
                    <li><a href="#operations">Operations & Runbooks</a>
                        <ul>
                            <li><a href="#user-management">User & Access Management</a></li>
                            <li><a href="#content-procedures">Content Management Procedures</a></li>
                            <li><a href="#product-procedures">Product Management Procedures</a></li>
                            <li><a href="#troubleshooting">Troubleshooting Guides</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
            
            <!-- Main Content -->
            <main>
                <section id="executive-summary">
                    <h2>Executive Summary</h2>
                    
                    <section id="platform-overview">
                        <h3>Platform Overview</h3>
                        <p>The XeroShoes eCommerce platform operates on a dual-instance Shopify Plus architecture, serving the US market through XeroShoes.com and the EU market through XeroShoes.eu. This separation is required due to legal and regulatory compliance requirements, ensuring proper business entity structure and data sovereignty.</p>
                        
                        <div class="alert info">
                            <strong>Platform Status:</strong> Both instances are fully operational with 99.9% uptime, serving customers across North America and Europe with localized experiences and compliance requirements.
                        </div>
                        
                        <h4>Content Inventory</h4>
                        <ul>
                            <li><strong>Products:</strong> Comprehensive product catalog with extensive metafield data (US instance documented)</li>
                            <li><strong>Collections:</strong> Smart collections and custom collections for product organization (US instance documented)</li>
                            <li><strong>Pages:</strong> Content pages (US instance documented)</li>
                            <li><strong>Blog Posts:</strong> Educational content and brand storytelling (US instance documented)</li>
                            <li><strong>Redirects:</strong> SEO preservation redirects for site migrations (US instance documented)</li>
                            <li><strong>Metaobjects:</strong> Structured content for FAQs, features, and product data (US instance documented)</li>
                        </ul>
                        
                        <div class="alert warning">
                            <strong>Note:</strong> EU instance (XeroShoes.eu) content structure and inventory not documented - requires separate analysis.
                        </div>
                    </section>
                    
                    <section id="key-technical-components">
                        <h3>Key Technical Components</h3>
                        <ul>
                            <li><strong>Theme:</strong> Fluid Framework v3.0.0 (Praella Agency)</li>
                            <li><strong>Custom Sections:</strong> Extensive custom sections including Xero-specific landing pages</li>
                            <li><strong>Metafields:</strong> Extensive custom metafield system for product data</li>
                            <li><strong>Integrations:</strong> Comprehensive third-party integrations for payments, shipping, and marketing</li>
                            <li><strong>Multi-Region:</strong> Separate Shopify Plus instances for US and EU compliance</li>
                        </ul>
                    </section>
                </section>
                
                <section id="platform-architecture">
                    <h2>Platform Architecture</h2>
                    
                    <section id="dual-instance-structure">
                        <h3>Dual-Instance Structure</h3>
                        <p>XeroShoes operates two separate Shopify Plus instances due to legal and regulatory requirements. This architecture ensures compliance with regional business entity structures and data sovereignty requirements.</p>
                        
                        <table class="data-table">
                            <tr>
                                <th>Instance</th>
                                <th>Domain</th>
                                <th>Shopify Subdomain</th>
                                <th>Status</th>
                                <th>Primary Market</th>
                            </tr>
                            <tr>
                                <td>US Instance</td>
                                <td>xeroshoes.com</td>
                                <td>shopxeroshoes.myshopify.com</td>
                                <td>Active - Primary</td>
                                <td>North America</td>
                            </tr>
                            <tr>
                                <td>EU Instance</td>
                                <td>xeroshoes.eu</td>
                                <td>shopxeroshoes-eu.myshopify.com</td>
                                <td>Active</td>
                                <td>Europe</td>
                            </tr>
                        </table>
                        
                        <h4>Instance Synchronization</h4>
                        <ul>
                            <li><strong>Product Data:</strong> Manual synchronization required between instances</li>
                            <li><strong>Content Updates:</strong> Independent content management per region</li>
                            <li><strong>Inventory:</strong> Separate inventory tracking and management</li>
                            <li><strong>Customer Data:</strong> Isolated customer databases per region</li>
                            <li><strong>Analytics:</strong> Separate analytics and reporting systems</li>
                        </ul>
                    </section>
                    
                    <section id="theme-architecture">
                        <h3>Theme Architecture</h3>
                        <p>The XeroShoes platform uses the Fluid Framework theme (v3.0.0) developed by Praella Agency, with extensive customizations for barefoot shoe retail and brand-specific functionality.</p>
                        
                        <table class="data-table">
                            <tr>
                                <th>Property</th>
                                <th>Value</th>
                            </tr>
                            <tr>
                                <td>Theme Name</td>
                                <td>Fluid Framework</td>
                            </tr>
                            <tr>
                                <td>Version</td>
                                <td>3.0.0</td>
                            </tr>
                            <tr>
                                <td>Developer</td>
                                <td>Praella Agency</td>
                            </tr>
                            <tr>
                                <td>Sections</td>
                                <td>Extensive custom sections</td>
                            </tr>
                            <tr>
                                <td>Templates</td>
                                <td>Multiple page templates</td>
                            </tr>
                            <tr>
                                <td>Snippets</td>
                                <td>Reusable Liquid snippets</td>
                            </tr>
                        </table>
                        
                        <h4>Custom Sections Inventory</h4>
                        <div class="section-categories">
                            <h5>Core Content Sections</h5>
                            <ul>
                                <li><code>announcement-bar.liquid</code> - Promotional messaging banner</li>
                                <li><code>global-header-slider.liquid</code> - Hero slider with product integration</li>
                                <li><code>global-media-banner.liquid</code> - Media banner with video/image support</li>
                                <li><code>global-page-header-banner.liquid</code> - Page header with background images</li>
                            </ul>
                            
                            <h5>Product-Specific Sections</h5>
                            <ul>
                                <li><code>xero-custom-landing.liquid</code> - Custom barefoot shoe landing page</li>
                                <li><code>product-comfort.liquid</code> - Product comfort information display</li>
                                <li><code>product-comfort-dynamic.liquid</code> - Dynamic comfort data integration</li>
                                <li><code>product-variant-attributes.liquid</code> - Product variant attribute display</li>
                                <li><code>product-collapsible.liquid</code> - Collapsible product information sections</li>
                            </ul>
                            
                            <h5>Collection & Search Sections</h5>
                            <ul>
                                <li><code>collection-all-list.liquid</code> - Complete collection listing</li>
                                <li><code>collection-list-style-1.liquid</code> - Styled collection grid display</li>
                                <li><code>search-layer.liquid</code> - Advanced search interface</li>
                                <li><code>predictive-search.liquid</code> - Predictive search functionality</li>
                            </ul>
                            
                            <h5>Blog & Content Sections</h5>
                            <ul>
                                <li><code>blog-listing.liquid</code> - Blog post listing page</li>
                                <li><code>blog-banner-slider.liquid</code> - Blog banner with slider functionality</li>
                                <li><code>press-blog-post.liquid</code> - Press and media blog posts</li>
                                <li><code>global-blog-posts.liquid</code> - Global blog post integration</li>
                            </ul>
                        </div>
                    </section>
                    
                    <section id="technology-stack">
                        <h3>Technology Stack</h3>
                        <ul>
                            <li><strong>Platform:</strong> Shopify Plus (dual instances)</li>
                            <li><strong>Theme:</strong> Fluid Framework v3.0.0 (Praella Agency)</li>
                            <li><strong>Liquid Templates:</strong> Custom Liquid templating system</li>
                            <li><strong>JavaScript:</strong> Custom JavaScript modules for enhanced functionality</li>
                            <li><strong>CSS:</strong> Custom CSS with XeroShoes branding</li>
                            <li><strong>Metafields:</strong> Extensive custom metafield system</li>
                            <li><strong>APIs:</strong> Shopify Admin API, Storefront API, and third-party integrations</li>
                        </ul>
                    </section>
                </section>
                
                <section id="content-management">
                    <h2>Content Management</h2>
                    
                    <section id="page-templates">
                        <h3>Page Templates & Structure</h3>
                        <p>The XeroShoes theme uses a modular section-based approach for content management, allowing flexible page layouts through customizable content blocks.</p>
                        
                        <h4>Core Page Templates</h4>
                        <p><strong>1. Homepage Template - "Main Landing Page" (<code>index.json</code>)</strong></p>
                        <ul>
                            <li><strong>Primary Sections:</strong>
                                <ul>
                                    <li><code>global-header-slider</code>: Hero section with product integration</li>
                                    <li><code>global-featured-collection</code>: Featured product collections</li>
                                    <li><code>global-features-grid</code>: Feature highlights and benefits</li>
                                    <li><code>global-blog-posts</code>: Latest blog content integration</li>
                                    <li><code>global-newsletter-banner</code>: Newsletter signup promotion</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <p><strong>2. Product Template - "Product Detail Page" (<code>template-product.liquid</code>)</strong></p>
                        <ul>
                            <li><strong>Structure:</strong>
                                <ul>
                                    <li><code>product-comfort</code>: Comfort information and benefits</li>
                                    <li><code>product-variant-attributes</code>: Size and color selection</li>
                                    <li><code>product-collapsible</code>: Detailed product information</li>
                                    <li><code>global-product-tabs</code>: Tabbed product details</li>
                                    <li><code>upsell-products</code>: Related product recommendations</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <p><strong>3. Collection Template - "Product Collection Page" (<code>template-collection.liquid</code>)</p>
                        <ul>
                            <li><strong>Structure:</strong>
                                <ul>
                                    <li><code>collection-banner</code>: Collection header with imagery</li>
                                    <li><code>collection-list-style-1</code>: Product grid display</li>
                                    <li><code>global-featured-products</code>: Featured products within collection</li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    
                    <section id="content-sections">
                        <h3>Content Sections Inventory</h3>
                        <p>Complete inventory of all custom sections available for content management across the XeroShoes platform.</p>
                        
                        <h4>Navigation & Header Sections</h4>
                        <ul>
                            <li><code>header.liquid</code> - Main site navigation and header</li>
                            <li><code>announcement-bar.liquid</code> - Top promotional banner</li>
                            <li><code>featured-mobile-header.liquid</code> - Mobile-specific header features</li>
                        </ul>
                        
                        <h4>Product Display Sections</h4>
                        <ul>
                            <li><code>product-with-image.liquid</code> - Product display with imagery</li>
                            <li><code>product-two-image-text.liquid</code> - Two-column product layout</li>
                            <li><code>product-media-banner.liquid</code> - Product media showcase</li>
                            <li><code>bundle-thickness-selector.liquid</code> - Product bundle selection</li>
                        </ul>
                        
                        <h4>Content & Media Sections</h4>
                        <ul>
                            <li><code>media-with-text.liquid</code> - Media content with text overlay</li>
                            <li><code>image-video-card.liquid</code> - Card-based media display</li>
                            <li><code>barefoot-image-with-text.liquid</code> - Brand-specific content blocks</li>
                            <li><code>seo-banner.liquid</code> - SEO-optimized banner content</li>
                        </ul>
                    </section>
                    
                    <section id="metafield-integration">
                        <h3>Metafield Integration</h3>
                        <p>XeroShoes uses an extensive metafield system to store structured product data, content information, and custom attributes.</p>
                        
                        <h4>Product Metafields</h4>
                        <ul>
                            <li><strong>Display Data:</strong>
                                <ul>
                                    <li><code>custom.display_title</code> - Custom product display title</li>
                                    <li><code>custom.feed_description</code> - Product feed description</li>
                                    <li><code>custom.product_highlights</code> - Rich text product highlights</li>
                                    <li><code>custom.product_description</code> - Metaobject reference for detailed descriptions</li>
                                </ul>
                            </li>
                            <li><strong>Product Attributes:</strong>
                                <ul>
                                    <li><code>custom.color</code> - Product color information</li>
                                    <li><code>custom.activity</code> - Activity type (running, hiking, casual)</li>
                                    <li><code>custom.gender</code> - Gender targeting</li>
                                    <li><code>custom.collection</code> - Collection associations</li>
                                </ul>
                            </li>
                            <li><strong>Media & Visuals:</strong>
                                <ul>
                                    <li><code>custom.mega_menu_image</code> - Mega menu display image</li>
                                    <li><code>custom.secondary_hover_image</code> - Product hover state image</li>
                                    <li><code>custom.description_featured_image</code> - Description section featured image</li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    
                    <section id="content-workflows">
                        <h3>Content Management Workflows</h3>
                        <p>Standardized procedures for managing content across both XeroShoes instances.</p>
                        
                        <h4>Page Creation Workflow</h4>
                        <ol>
                            <li>Access Shopify Admin → Online Store → Pages</li>
                            <li>Click "Add page" to create new page</li>
                            <li>Enter page title and URL handle</li>
                            <li>Select appropriate template from available options</li>
                            <li>Add content using rich text editor</li>
                            <li>Configure SEO settings (title, description, keywords)</li>
                            <li>Set visibility and publication date</li>
                            <li>Save and publish page</li>
                            <li>Repeat process on both US and EU instances</li>
                        </ol>
                        
                        <h4>Blog Post Management</h4>
                        <ol>
                            <li>Access Online Store → Blog posts</li>
                            <li>Create new blog post with title and content</li>
                            <li>Add featured image and excerpt</li>
                            <li>Set publication date and author</li>
                            <li>Add relevant tags for categorization</li>
                            <li>Configure SEO metadata</li>
                            <li>Publish and verify on live site</li>
                        </ol>
                    </section>
                </section>
                
                <section id="product-management">
                    <h2>Product Management</h2>
                    
                    <section id="product-inventory">
                        <h3>Product Inventory</h3>
                        <p>Product inventory management across both XeroShoes instances with synchronized catalog structure.</p>
                        
                        <table class="data-table">
                            <tr>
                                <th>Instance</th>
                                <th>Status</th>
                                <th>Product Types</th>
                                <th>Collection Structure</th>
                            </tr>
                            <tr>
                                <td>US (xeroshoes.com)</td>
                                <td>Active - Primary</td>
                                <td>Barefoot shoes, sandals, boots, accessories</td>
                                <td>Smart collections and custom collections</td>
                            </tr>
                            <tr>
                                <td>EU (xeroshoes.eu)</td>
                                <td>Active</td>
                                <td>Not documented</td>
                                <td>Not documented</td>
                            </tr>
                        </table>
                        
                        <div class="alert warning">
                            <strong>Data Limitation:</strong> EU instance product and collection data not available in current export. Documentation based on US instance only.
                        </div>
                        
                        <h4>Product Categories</h4>
                        <ul>
                            <li><strong>Barefoot Shoes:</strong> Core product line with various styles</li>
                            <li><strong>Sandals:</strong> Summer and casual footwear options</li>
                            <li><strong>Boots:</strong> Winter and outdoor footwear</li>
                            <li><strong>Accessories:</strong> Insoles, laces, and care products</li>
                        </ul>
                    </section>
                    
                    <section id="product-data-standards">
                        <h3>Product Data Standards</h3>
                        <p>Comprehensive data standards for product information management across both instances.</p>
                        
                        <h4>Required Product Information</h4>
                        <ul>
                            <li><strong>Basic Information:</strong>
                                <ul>
                                    <li>Product title (clear, descriptive naming)</li>
                                    <li>Product description (detailed, benefit-focused)</li>
                                    <li>Vendor (XeroShoes)</li>
                                    <li>Product type (Barefoot Shoes, Sandals, Boots, Accessories)</li>
                                    <li>Tags (activity, gender, features)</li>
                                </ul>
                            </li>
                            <li><strong>Pricing & Inventory:</strong>
                                <ul>
                                    <li>Price (USD for US, EUR for EU)</li>
                                    <li>Compare at price (if applicable)</li>
                                    <li>SKU (unique identifier)</li>
                                    <li>Inventory quantity</li>
                                    <li>Weight and dimensions</li>
                                </ul>
                            </li>
                            <li><strong>Media Requirements:</strong>
                                <ul>
                                    <li>Primary product image (1024x1024 minimum)</li>
                                    <li>Additional product angles (3-5 images)</li>
                                    <li>Lifestyle images showing product in use</li>
                                    <li>Detail shots of key features</li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    
                    <section id="metafields">
                        <h3>Metafields & Custom Data</h3>
                        <p>Detailed metafield structure for storing custom product data and attributes.</p>
                        
                        <h4>Core Product Metafields</h4>
                        <table class="data-table">
                            <tr>
                                <th>Metafield</th>
                                <th>Type</th>
                                <th>Purpose</th>
                                <th>Example</th>
                            </tr>
                            <tr>
                                <td>custom.display_title</td>
                                <td>Single line text</td>
                                <td>Custom product display title</td>
                                <td>"Dillon Canvas Slip-On - Big Kids"</td>
                            </tr>
                            <tr>
                                <td>custom.feed_description</td>
                                <td>Multi-line text</td>
                                <td>Product feed description</td>
                                <td>SEO-optimized product description</td>
                            </tr>
                            <tr>
                                <td>custom.product_highlights</td>
                                <td>Rich text</td>
                                <td>Product feature highlights</td>
                                <td>Bulleted list of key benefits</td>
                            </tr>
                            <tr>
                                <td>custom.color</td>
                                <td>List of single line text</td>
                                <td>Available colors</td>
                                <td>["Black", "Navy", "Gray"]</td>
                            </tr>
                            <tr>
                                <td>custom.activity</td>
                                <td>List of single line text</td>
                                <td>Activity types</td>
                                <td>["Running", "Hiking", "Casual"]</td>
                            </tr>
                            <tr>
                                <td>custom.draft_variant</td>
                                <td>Boolean</td>
                                <td>Variant visibility control</td>
                                <td>TRUE = hidden, FALSE/blank = visible</td>
                            </tr>
                        </table>
                        
                        <h4>Critical Metafield: custom.draft_variant</h4>
                        <p>The <code>custom.draft_variant</code> metafield is a custom implementation that extends Shopify's native variant management capabilities. This metafield provides granular control over variant visibility on product detail pages.</p>
                        
                        <div class="alert warning">
                            <strong>Important:</strong> This is a custom metafield that directly impacts customer experience and product management workflows. Understanding its behavior is critical for effective product management.
                        </div>
                        
                        <h5>Variant Visibility Control</h5>
                        <ul>
                            <li><strong>TRUE:</strong> Variant is excluded from the product detail page</li>
                            <li><strong>FALSE or blank:</strong> Variant is included and visible on the product detail page</li>
                        </ul>
                        
                        <h5>Use Cases</h5>
                        <ul>
                            <li><strong>Seasonal Products:</strong> Hide out-of-season variants without deleting them</li>
                            <li><strong>Inventory Management:</strong> Hide variants that are temporarily out of stock</li>
                            <li><strong>Product Testing:</strong> Test new variants without full public visibility</li>
                            <li><strong>Regional Availability:</strong> Hide variants not available in specific regions</li>
                            <li><strong>Product Lifecycle:</strong> Manage product discontinuation process</li>
                        </ul>
                        
                        <h5>Implementation Notes</h5>
                        <ul>
                            <li>Metafield applies to individual variants, not entire products</li>
                            <li>Changes take effect immediately upon saving</li>
                            <li>Hidden variants are not accessible via direct URL</li>
                            <li>Variant data remains intact when hidden (pricing, inventory, etc.)</li>
                            <li>Admin users can still see and manage hidden variants in Shopify Admin</li>
                        </ul>
                        
                        <h4>Technical Implementation</h4>
                        <p>The <code>custom.draft_variant</code> metafield is implemented through a sophisticated Liquid + JavaScript system that dynamically controls variant visibility on product pages.</p>
                        
                        <h5>Liquid Template Implementation</h5>
                        <p>The system uses Liquid templates to process variant data and generate JavaScript configuration:</p>
                        
                        <div class="code-block">
                            <pre><code>{%- liquid
    assign countvariants = product.variants_count
    assign count = 0
    for variant in product.variants
        if variant.metafields.custom.draft_variant == true
            assign count = count | plus: 1
        endif
    endfor
-%}
{%- if countvariants != count -%}
    <!-- Only render variant picker if there are non-draft variants -->
{%- endif -%}</code></pre>
                        </div>
                        
                        <h5>JavaScript Configuration Generation</h5>
                        <p>The Liquid template generates a JSON script containing draft variant IDs:</p>
                        
                        <div class="code-block">
                            <pre><code>&lt;script class="variantsJSONDraft-{{ product.id }}" data-variantJSONDraft type="application/json"&gt;
{%- for variant in product.variants -%}
    {%- if variant.metafields.custom.draft_variant == true -%}
        {{- variant.id | json -}},
    {%- endif -%}
{%- endfor -%}
&lt;/script&gt;</code></pre>
                        </div>
                        
                        <h5>Client-Side Processing</h5>
                        <p>The JavaScript <code>draftvariants()</code> method processes the draft variant data:</p>
                        
                        <div class="code-block">
                            <pre><code>draftvariants(currentVariant) {
    // Get draft variant IDs from JSON
    let draftVariantIds = [];
    if (this.variantdraft_json && this.variantdraft_json.textContent) {
        const draftJsonText = this.variantdraft_json.textContent.trim();
        if (draftJsonText) {
            draftVariantIds = draftJsonText.split(',')
                .map(id => parseInt(id.trim()))
                .filter(id => !isNaN(id));
        }
    }
    
    // Hide option values where ALL variants are draft
    option1Values.forEach(option1Value => {
        const variantsWithOption1 = variants.filter(v => v.option1 === option1Value);
        const allDraft = variantsWithOption1.every(v => draftVariantIds.includes(v.id));
        
        const option1Input = this.querySelector(`input[value="${CSS.escape(option1Value)}"]`);
        if (option1Input) {
            const swatch = option1Input.closest('.swatch');
            if (swatch && !swatch.closest('[data-overflow-indicator]')) {
                if (allDraft) {
                    swatch.classList.add('d-none');
                } else {
                    swatch.classList.remove('d-none');
                }
            }
        }
    });
}</code></pre>
                        </div>
                        
                        <h5>Multi-Option Logic</h5>
                        <p>The system handles complex multi-option scenarios:</p>
                        <ul>
                            <li><strong>Option 1 (Primary):</strong> Hides entire option values if ALL variants with that value are draft</li>
                            <li><strong>Option 2 & 3:</strong> Applies same logic to secondary and tertiary options</li>
                            <li><strong>Cascading Logic:</strong> When Option 1 is selected, Option 2/3 values are hidden if no non-draft variants exist for that combination</li>
                            <li><strong>Overflow Protection:</strong> Preserves overflow indicators and pagination controls</li>
                        </ul>
                        
                        <h5>Performance Optimizations</h5>
                        <ul>
                            <li><strong>Loop Prevention:</strong> <code>_isUpdatingDraftVariants</code> flag prevents infinite update loops</li>
                            <li><strong>State Preservation:</strong> Maintains overflow indicator states during updates</li>
                            <li><strong>Efficient Filtering:</strong> Uses JavaScript array methods for fast variant filtering</li>
                            <li><strong>CSS-Only Hiding:</strong> Uses <code>d-none</code> class for instant visibility changes</li>
                        </ul>
                        
                        <h5>File Locations</h5>
                        <ul>
                            <li><strong>Liquid Logic:</strong> <code>blocks/_product-variant-picker.liquid</code></li>
                            <li><strong>Card Implementation:</strong> <code>snippets/product-generic-card.liquid</code></li>
                            <li><strong>Swatch Logic:</strong> <code>snippets/variant-picker_card.liquid</code></li>
                            <li><strong>JavaScript Engine:</strong> <code>assets/component-variant-options.js</code></li>
                        </ul>
                    </section>
                    
                    <section id="variant-visibility-management">
                        <h3>Variant Visibility Management</h3>
                        <p>Managing variant visibility using the <code>custom.draft_variant</code> metafield - a custom implementation specific to XeroShoes that extends beyond standard Shopify functionality.</p>
                        
                        <h4>Variant Visibility Control</h4>
                        <ol>
                            <li>Access product in Shopify Admin</li>
                            <li>Navigate to the Variants section</li>
                            <li>Select the variant to modify</li>
                            <li>Scroll to the Metafields section</li>
                            <li>Locate the <code>custom.draft_variant</code> metafield</li>
                            <li>Set value:
                                <ul>
                                    <li><strong>TRUE:</strong> To hide variant from product page</li>
                                    <li><strong>FALSE or leave blank:</strong> To show variant on product page</li>
                                </ul>
                            </li>
                            <li>Save the product</li>
                            <li>Verify visibility changes on the live product page</li>
                            <li>Apply same changes to corresponding instance if needed</li>
                        </ol>
                        
                        <div class="alert info">
                            <strong>Pro Tip:</strong> Use variant visibility management for seasonal inventory control, testing new variants, or managing regional availability without deleting variant data.
                        </div>
                        
                        <h4>Advanced Use Cases</h4>
                        <ul>
                            <li><strong>Seasonal Product Management:</strong> Hide winter boots during summer without losing variant data</li>
                            <li><strong>A/B Testing:</strong> Test new color variants with limited visibility before full launch</li>
                            <li><strong>Regional Rollouts:</strong> Gradually introduce products to different markets</li>
                            <li><strong>Inventory Transitions:</strong> Manage product discontinuation while maintaining data integrity</li>
                        </ul>
                    </section>
                </section>
                
                <section id="integrations">
                    <h2>Integrations & Apps</h2>
                    
                    <section id="payment-processing">
                        <h3>Payment Processing</h3>
                        <p>Comprehensive payment processing setup across both XeroShoes instances.</p>
                        
                        <h4>Primary Payment Methods</h4>
                        <ul>
                            <li><strong>Shopify Payments:</strong> Primary payment processor for both instances</li>
                            <li><strong>PayPal:</strong> Alternative payment option for customer convenience</li>
                            <li><strong>Apple Pay:</strong> Mobile payment integration</li>
                            <li><strong>Google Pay:</strong> Mobile payment integration</li>
                            <li><strong>Shop Pay:</strong> Shopify's accelerated checkout</li>
                        </ul>
                        
                        <h4>Regional Payment Configuration</h4>
                        <table class="data-table">
                            <tr>
                                <th>Instance</th>
                                <th>Primary Currency</th>
                                <th>Payment Methods</th>
                                <th>Fraud Protection</th>
                            </tr>
                            <tr>
                                <td>US (xeroshoes.com)</td>
                                <td>USD</td>
                                <td>Shopify Payments, PayPal, Apple Pay, Google Pay</td>
                                <td>Shopify Fraud Analysis</td>
                            </tr>
                            <tr>
                                <td>EU (xeroshoes.eu)</td>
                                <td>EUR</td>
                                <td>Shopify Payments, PayPal, Local Methods</td>
                                <td>Shopify Fraud Analysis</td>
                            </tr>
                        </table>
                    </section>
                    
                    <section id="shipping-logistics">
                        <h3>Shipping & Logistics</h3>
                        <p>Shipping configuration and carrier integrations for both regional instances.</p>
                        
                        <h4>US Shipping Configuration</h4>
                        <ul>
                            <li><strong>UPS:</strong> Ground, 2-Day, Next Day Air</li>
                            <li><strong>FedEx:</strong> Ground, 2-Day, Overnight</li>
                            <li><strong>USPS:</strong> Priority Mail, First Class</li>
                            <li><strong>Free Shipping:</strong> Orders over $75 (US only)</li>
                        </ul>
                        
                        <h4>EU Shipping Configuration</h4>
                        <ul>
                            <li><strong>DHL:</strong> Express, Standard delivery</li>
                            <li><strong>Local Carriers:</strong> Regional delivery partners</li>
                            <li><strong>Free Shipping:</strong> Orders over €75 (EU only)</li>
                        </ul>
                    </section>
                    
                    <section id="marketing-email">
                        <h3>Marketing & Email</h3>
                        <p>Marketing platform integrations and email marketing configuration.</p>
                        
                        <h4>Email Marketing Platform</h4>
                        <ul>
                            <li><strong>Klaviyo:</strong> Primary email marketing platform</li>
                            <li><strong>Automated Flows:</strong> Welcome series, abandoned cart, post-purchase</li>
                            <li><strong>Segmentation:</strong> Customer behavior and purchase history</li>
                            <li><strong>Campaigns:</strong> Promotional emails and newsletters</li>
                        </ul>
                        
                        <h4>Social Media Integration</h4>
                        <ul>
                            <li><strong>Facebook Pixel:</strong> Conversion tracking and retargeting</li>
                            <li><strong>Instagram Shopping:</strong> Product catalog integration</li>
                            <li><strong>Social Sharing:</strong> Product and content sharing buttons</li>
                        </ul>
                    </section>
                    
                    <section id="analytics-tracking">
                        <h3>Analytics & Tracking</h3>
                        <p>Comprehensive analytics and tracking setup for both instances.</p>
                        
                        <h4>Analytics Platforms</h4>
                        <ul>
                            <li><strong>Google Analytics 4:</strong> Primary analytics platform</li>
                            <li><strong>Shopify Analytics:</strong> Built-in eCommerce analytics</li>
                            <li><strong>Facebook Analytics:</strong> Social media performance tracking</li>
                        </ul>
                        
                        <h4>Tracking Configuration</h4>
                        <ul>
                            <li><strong>Conversion Tracking:</strong> Purchase, add to cart, email signup</li>
                            <li><strong>Customer Journey:</strong> Multi-touch attribution tracking</li>
                            <li><strong>Performance Monitoring:</strong> Site speed and user experience</li>
                        </ul>
                    </section>
                </section>
                
                <section id="custom-implementations">
                    <h2>Custom Implementations & Technical Details</h2>
                    
                    <section id="theme-customizations">
                        <h3>Theme Customizations</h3>
                        <p>XeroShoes-specific customizations that extend beyond standard Shopify functionality.</p>
                        
                        <h4>Custom Sections</h4>
                        <ul>
                            <li><strong>Xero Custom Landing:</strong> Specialized landing page sections for product launches</li>
                            <li><strong>Product Group Blocks:</strong> Custom product grouping and display logic</li>
                            <li><strong>Video Banners:</strong> Enhanced video integration with custom controls</li>
                            <li><strong>Multi-Layer Sales Motivators:</strong> Advanced promotional display system</li>
                        </ul>
                        
                        <h4>Custom Liquid Logic</h4>
                        <ul>
                            <li><strong>Variant Visibility Control:</strong> <code>custom.draft_variant</code> metafield implementation</li>
                            <li><strong>Dynamic Option Filtering:</strong> Real-time variant option filtering based on availability</li>
                            <li><strong>Color Swatch Logic:</strong> Custom color matching and display algorithms</li>
                            <li><strong>Inventory Status Display:</strong> Custom low-stock and availability messaging</li>
                        </ul>
                    </section>
                    
                    <section id="metafield-architecture">
                        <h3>Metafield Architecture</h3>
                        <p>Custom metafield system designed specifically for XeroShoes product data requirements.</p>
                        
                        <h4>Product-Specific Metafields</h4>
                        <ul>
                            <li><strong>custom.display_title:</strong> Custom product titles for different contexts</li>
                            <li><strong>custom.feed_description:</strong> SEO-optimized descriptions for product feeds</li>
                            <li><strong>custom.product_highlights:</strong> Rich text feature highlights with formatting</li>
                            <li><strong>custom.activity:</strong> Activity-based categorization for filtering</li>
                            <li><strong>custom.color:</strong> Color information for swatch generation</li>
                            <li><strong>custom.draft_variant:</strong> Variant visibility control system</li>
                        </ul>
                        
                        <h4>Metafield Dependencies</h4>
                        <ul>
                            <li><strong>Variant Picker Logic:</strong> Depends on <code>custom.draft_variant</code> for visibility control</li>
                            <li><strong>Search Functionality:</strong> Uses <code>custom.activity</code> and <code>custom.color</code> for filtering</li>
                            <li><strong>Product Feeds:</strong> Leverages <code>custom.feed_description</code> for external integrations</li>
                            <li><strong>Collection Logic:</strong> Utilizes metafield data for smart collection rules</li>
                        </ul>
                    </section>
                    
                    <section id="integration-customizations">
                        <h3>Integration Customizations</h3>
                        <p>Custom implementations and configurations specific to XeroShoes' business requirements.</p>
                        
                        <h4>App-Specific Customizations</h4>
                        <ul>
                            <li><strong>Stamped Reviews:</strong> Custom review display logic and styling</li>
                            <li><strong>Klaviyo Integration:</strong> Custom event tracking and segmentation logic</li>
                            <li><strong>Searchanise:</strong> Custom search filters and result ranking</li>
                            <li><strong>Elevar Tracking:</strong> Custom conversion tracking implementation</li>
                        </ul>
                        
                        <h4>Custom JavaScript Modules</h4>
                        <ul>
                            <li><strong>Variant Options Component:</strong> Enhanced variant selection with draft variant support</li>
                            <li><strong>Product Form Handler:</strong> Custom form submission and validation logic</li>
                            <li><strong>Cart Drawer Controller:</strong> Enhanced cart functionality with custom features</li>
                            <li><strong>Search Enhancement:</strong> Custom search behavior and result display</li>
                        </ul>
                    </section>
                </section>
            </main>
        </div>
    </div>
    
    <!-- Include Footer -->
    <div id="footer-placeholder"></div>
    
    <!-- Load header and footer -->
    <script>
        // Load header
        fetch('templates/header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header-placeholder').innerHTML = data;
                // Re-initialize header menu functionality
                const menuToggle = document.getElementById('menu-toggle');
                const headerMenu = document.getElementById('header-menu');
                
                if (menuToggle && headerMenu) {
                    menuToggle.addEventListener('click', function() {
                        const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                        
                        menuToggle.setAttribute('aria-expanded', !isExpanded);
                        menuToggle.classList.toggle('active');
                        headerMenu.classList.toggle('show');
                    });
                    
                    // Close menu when clicking outside
                    document.addEventListener('click', function(event) {
                        if (!menuToggle.contains(event.target) && !headerMenu.contains(event.target)) {
                            menuToggle.setAttribute('aria-expanded', 'false');
                            menuToggle.classList.remove('active');
                            headerMenu.classList.remove('show');
                        }
                    });
                }
            })
            .catch(error => console.error('Error loading header:', error));
        
        // Load footer
        fetch('templates/footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
            })
            .catch(error => console.error('Error loading footer:', error));
    </script>
    
    <!-- Enhanced TOC Script -->
    <script src="enhanced-toc.js"></script>
</body>
</html>
